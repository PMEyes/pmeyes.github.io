# GitHub Pages 部署指南

## 概述

本项目已配置为支持 GitHub Pages 自动部署。当您推送代码到 `main` 分支时，GitHub Actions 会自动构建项目并部署到 GitHub Pages。

## 部署配置

### 1. 项目配置

- **Base URL**: 生产环境使用 `/pmeyes.github.io/`，开发环境使用 `/`
- **构建输出目录**: `dist/`
- **部署分支**: `gh-pages`

### 2. 自动部署

项目使用 GitHub Actions 进行自动部署：

1. 推送代码到 `main` 分支
2. GitHub Actions 自动触发构建
3. 构建完成后自动部署到 GitHub Pages

### 3. 手动部署

如果需要手动部署，可以使用以下命令：

```bash
# 安装依赖
npm install

# 构建项目
npm run build

# 部署到 GitHub Pages
npm run deploy
```

## 部署步骤

### 第一步：启用 GitHub Pages

1. 进入 GitHub 仓库设置
2. 找到 "Pages" 选项
3. 在 "Source" 部分选择 "Deploy from a branch"
4. 选择 `gh-pages` 分支和 `/ (root)` 文件夹
5. 点击 "Save"

### 第二步：配置自定义域名（可选）

1. 在 GitHub Pages 设置中添加自定义域名
2. 确保 DNS 记录正确配置
3. 项目会自动创建 `CNAME` 文件

### 第三步：验证部署

1. 等待 GitHub Actions 完成构建
2. 访问 `https://pmeyes.github.io` 验证部署
3. 检查所有路由是否正常工作

## 路由处理

### SPA 路由支持

项目使用 React Router 进行客户端路由，GitHub Pages 通过以下方式支持 SPA 路由：

1. **404.html**: 处理所有未找到的路由，重定向到主应用
2. **index.html**: 包含路由处理脚本，确保刷新页面时路由正确

### 路由配置

- 使用 `HashRouter` 确保在 GitHub Pages 环境下正常工作
- 所有路由都会正确重定向到主应用

## 构建优化

### 资源优化

- 图片资源自动优化和压缩
- CSS 和 JS 文件自动分割和压缩
- 启用 gzip 压缩

### 缓存策略

- 静态资源使用长期缓存
- HTML 文件使用短期缓存
- 确保更新时资源能正确刷新

## 故障排除

### 常见问题

1. **页面显示 404**
   - 检查 GitHub Pages 设置是否正确
   - 确认 `gh-pages` 分支存在
   - 验证构建是否成功

2. **路由不工作**
   - 确认 404.html 文件存在
   - 检查 index.html 中的路由处理脚本
   - 验证 HashRouter 配置

3. **资源加载失败**
   - 检查 vite.config.ts 中的 base 配置
   - 确认资源路径正确
   - 验证构建输出

### 调试步骤

1. 检查 GitHub Actions 日志
2. 验证构建输出目录内容
3. 测试本地构建：`npm run build && npm run preview`
4. 检查浏览器开发者工具的网络和控制台

## 环境变量

项目使用以下环境变量：

- `NODE_ENV`: 控制构建模式（development/production）
- `GITHUB_TOKEN`: GitHub Actions 使用的认证令牌（自动提供）

## 性能优化

### 构建优化

- 代码分割：vendor 和 router 代码分别打包
- 资源压缩：启用 gzip 和 brotli 压缩
- 缓存优化：合理的缓存策略

### 运行时优化

- 懒加载：路由级别的代码分割
- 图片优化：自动压缩和格式转换
- 预加载：关键资源预加载

## 监控和维护

### 部署监控

- GitHub Actions 提供详细的构建日志
- 可以设置部署通知
- 支持回滚到之前的版本

### 定期维护

- 定期更新依赖包
- 监控构建性能
- 检查安全漏洞

## 联系支持

如果遇到部署问题，请：

1. 检查 GitHub Actions 日志
2. 查看项目文档
3. 提交 Issue 描述问题 